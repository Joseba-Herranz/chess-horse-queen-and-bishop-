<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <style>
            .dCasn {
                width: 50px;
                height: 50px;
                background-color: white;
            }

            .dCasb {
                width: 50px;
                height: 50px;
                background-color: black;
            }

            td {
                border: 1px solid;
            }
            img{
                width: 50px;;
            }
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script>
            var img = new Image();
            img.id = "Reina"
            img.src = "queen.png";
            $(document).ready(function () {
                $('#pos44').append(img);
                $('.dCasb,.dCasn').attr('draggable', true);
                $(".dCasb,.dCasn").on("dragstart", function (event) {
                    console.log(this.id);
                    event.originalEvent.dataTransfer.setData('text', this.id);
                });

                $(".dCasb,.dCasn").on("dragover", function (event) {
                    event.preventDefault();
                });

                $(".dCasb,.dCasn").on("dragenter", function (event) {
                    event.preventDefault();
                });

                $(".dCasb,.dCasn").on("dragleave", function (event) {
                    event.preventDefault();
                });

                $(".dCasb,.dCasn").on("drop", function (event) {
                    sOriginal = event.originalEvent.dataTransfer.getData('text');
                    sDestino = this.id;
                    console.log(sOriginal);
                    console.log(this.id);
                    
                    if(localizacion(sOriginal, sDestino)){
                        $('#Reina').appendTo(this);
                    }else{
                        console.log("Ese movimiento no es valido");
                    }
                });
            });
            
            function localizacion(original, destino) {
                var original = original + "";
                var destino = destino + "";  

                or1 = original.charAt(3);
                or2 = original.charAt(4);
                des1 = destino.charAt(3);
                des2 = destino.charAt(4);

                or= or1+or2;
                des=des1+des2;

                if((Math.abs(or1 - des1) == Math.abs(or2 - des2)) || (or1 == des1) || (or2 == des2)) {
                    console.log("Movimiento válido para la reina");
                    return true;
                }else{
                    console.log("Movimiento inválido para la reina");
                    return false;
                }
            }
        </script>
    </head>
    <body>
        <table style=" border:1px solid black;margin-left:30px;margin-top:30px;border-collapse:collapse;">
            <tr>
                <td>
                    <div class="dCasn" id="pos11"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos12"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos13"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos14"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos15"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos16"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos17"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos18"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="dCasb" id="pos21"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos22"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos23"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos24"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos25"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos26"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos27"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos28"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="dCasn" id="pos31"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos32"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos33"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos34"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos35"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos36"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos37"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos38"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="dCasb" id="pos41"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos42"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos43"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos44"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos45"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos46"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos47"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos48"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="dCasn" id="pos51"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos52"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos53"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos54"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos55"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos56"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos57"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos58"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="dCasb" id="pos61"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos62"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos63"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos64"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos65"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos66"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos67"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos68"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="dCasn" id="pos71"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos72"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos73"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos74"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos75"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos76"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos77"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos78"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="dCasb" id="pos81"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos82"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos83"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos84"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos85"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos86"></div>
                </td>
                <td>
                    <div class="dCasb" id="pos87"></div>
                </td>
                <td>
                    <div class="dCasn" id="pos88"></div>
                </td>
            </tr>
        </table>
    </body>
</html>